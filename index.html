<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CÃ i Ä‘áº·t Locket Gold</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Galaxy background -->
  <div class="galaxy-background"></div>

  <!-- Nháº­p key -->
  <div id="key-container" class="card">
    <h1>ğŸ”‘ Nháº­p Key</h1>
    <p>Vui lÃ²ng nháº­p key Ä‘á»ƒ truy cáº­p pháº§n cÃ i Ä‘áº·t</p>
    <input type="text" id="key-input" placeholder="Nháº­p key...">
    <button id="verify-btn" class="btn-verify">XÃ¡c nháº­n</button>
    <p id="error-msg"></p>
  </div>

  <!-- Pháº§n cÃ i Ä‘áº·t -->
  <div id="main-container" class="card">
    <h1>ğŸš€ CÃ i Ä‘áº·t Locket Gold</h1>
    <p>ChÃ o má»«ng! Báº¡n Ä‘Ã£ xÃ¡c nháº­n key há»£p lá»‡.</p>
    <a href="shadowrocket://install?module=https://raw.githubusercontent.com/junn-dev/locket-gold/main/junn.sgmodule" class="button btn-install">CÃ i Locket Ngay</a>
    <button id="download-config" class="btn-download">ğŸ“¥ Táº£i vá» Cáº¥u HÃ¬nh</button>
  </div>

<script>
const WORKER_URL = "https://locket-gold.hungnguyen-junn.workers.dev";

// XÃ¡c nháº­n key
async function verifyKey() {
  const key = document.getElementById("key-input").value.trim();
  const error = document.getElementById("error-msg");
  error.textContent = "";

  if (!key) { 
    error.textContent = "âš ï¸ Vui lÃ²ng nháº­p key!"; 
    return; 
  }

  try {
    const resp = await fetch(WORKER_URL + "/verify", {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({key})
    });
    const data = await resp.json().catch(()=>({error:"Server khÃ´ng pháº£n há»“i"}));

    if (resp.ok && data.ok) {
      document.getElementById("key-container").style.display = "none";
      document.getElementById("main-container").style.display = "block";
    } else {
      error.textContent = data.error || "Key khÃ´ng há»£p lá»‡!";
    }
  } catch(e){
    error.textContent = "Lá»—i káº¿t ná»‘i server!";
  }
}

// Táº£i file cáº¥u hÃ¬nh
document.getElementById("download-config").addEventListener("click", ()=>{
  const link = document.createElement("a");
  link.href = "LocketJunn.mobileconfig"; // cÃ¹ng thÆ° má»¥c project
  link.download = "LocketJunn.mobileconfig";
  link.click();
});

document.getElementById("verify-btn").addEventListener("click", verifyKey);

// Táº¡o galaxy stars nháº¹ nhÃ ng
document.addEventListener('DOMContentLoaded',()=>{
  const bg = document.querySelector('.galaxy-background');
  for(let i=0;i<100;i++){
    const s = document.createElement('div');
    s.className='star';
    s.style.width=s.style.height=(Math.random()*2+1)+'px';
    s.style.backgroundColor='white';
    s.style.opacity=Math.random();
    s.style.top=Math.random()*100+'%';
    s.style.left=Math.random()*100+'%';
    bg.appendChild(s);
  }
});
</script>

</body>
</html>
