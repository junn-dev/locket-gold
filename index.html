<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Locket VIP - Unified</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container fade-in">

        <!-- ===== Login View ===== -->
        <div id="login-view">
            <h2>üîë Nh·∫≠p Username Locket</h2>
            <div class="input-group">
                <input type="text" id="user-username" placeholder="Nh·∫≠p Username Locket c·ªßa b·∫°n">
            </div>
            <button class="btn btn-primary" onclick="loginUser()">Ti·∫øp t·ª•c</button>
        </div>

        <!-- ===== Main Card ===== -->
        <div class="card" id="main-card" style="display:none;">
            <h2>Locket VIP üéâ</h2>
            <p class="sub-title">N√¢ng c·∫•p l√™n Locket Gold</p>

            <div class="input-group">
                <input type="text" id="username" placeholder="Username Locket c·ªßa b·∫°n" required>
            </div>

            <div class="input-group">
                <label>üéÅ Ng∆∞·ªùi gi·ªõi thi·ªáu (n·∫øu c√≥)</label>
                <input type="text" id="referrer" placeholder="Username ng∆∞·ªùi gi·ªõi thi·ªáu">
                <small>Ng∆∞·ªùi gi·ªõi thi·ªáu nh·∫≠n 5.000 VND</small>
            </div>

            <button id="start-btn" onclick="startUpgrade()">‚ú® B·∫Øt ƒë·∫ßu n√¢ng c·∫•p</button>

            <!-- QR Container -->
            <div id="qr-container" style="display:none;">
                <p><b>Qu√©t m√£ QR ƒë·ªÉ thanh to√°n 20.000 VND</b></p>
                <p class="qr-info">
                    N·ªôi dung chuy·ªÉn kho·∫£n: 
                    <span id="transfer-content"></span>
                </p>
                <img id="qr-image" src="" alt="QR Thanh to√°n">
                <p class="qr-status">‚è≥ ƒêang ch·ªù thanh to√°n...</p>
            </div>

            <!-- Notice & Download -->
            <div class="notice" id="install-notice" style="display:none;">
                ‚úÖ Thanh to√°n th√†nh c√¥ng!<br>
                üì¢ V√†o app Locket ki·ªÉm tra ƒë√£ l√™n Gold ch∆∞a?
            </div>

            <a id="download-link" class="btn-primary-small" href="LocketJunn.mobileconfig" download style="display:none;">
                üì• T·∫£i v·ªÅ C·∫•u H√¨nh
            </a>

            <button id="reactivate-btn" onclick="reactivate()" style="display:none;">üîÑ N√¢ng c·∫•p l·∫°i Gold</button>

            <div id="activation-message" class="message" style="display:none;"></div>
        </div>

        <!-- ===== Dashboard View ===== -->
        <div id="dashboard-view" style="display:none;">
            <h2 id="welcome-message">Xin ch√†o, User!</h2>

            <!-- Stat Boxes -->
            <div class="stat-box">
                <p>S·ªë d∆∞ gi·ªõi thi·ªáu (VND)</p>
                <h3 id="current-balance">0ƒë</h3>
                <div id="referral-count" class="ref-count"></div>
            </div>

            <div class="stat-box">
                <p>Tr·∫°ng th√°i Premium</p>
                <h3 id="user-status">ƒêang t·∫£i...</h3>
            </div>

            <!-- Referral Link -->
            <div class="action-card">
                <h3>üîó Link gi·ªõi thi·ªáu c·ªßa b·∫°n</h3>
                <p style="font-size:14px;color:#666;">G·ª≠i link n√†y cho b·∫°n b√® ƒë·ªÉ nh·∫≠n th∆∞·ªüng 5.000ƒë.</p>
                <div class="input-group referral">
                    <input type="text" id="referral-link-display" readonly>
                    <button class="btn" onclick="copyReferralLink()">Copy</button>
                </div>
            </div>

            <!-- Activate Friend -->
            <div class="action-card">
                <h3>‚ú® K√≠ch ho·∫°t Premium cho b·∫°n b√® (20.000ƒë)</h3>
                <p style="font-size:14px;color:#666;">D√πng s·ªë d∆∞ gi·ªõi thi·ªáu ƒë·ªÉ l√™n Premium cho b·∫°n b√® c·ªßa b·∫°n.</p>
                <div class="input-group">
                    <input type="text" id="friend-username" placeholder="Username b·∫°n b√®">
                </div>
                <button class="btn btn-primary" onclick="activateFriend()">K√≠ch ho·∫°t Premium</button>
            </div>

            <div id="dashboard-activation-message" class="message" style="display:none;"></div>

            <button id="reactivate-btn-dashboard" class="btn btn-primary" style="display:none;">üîÑ N√¢ng c·∫•p l·∫°i Gold</button>
            <button class="btn btn-primary logout" onclick="logout()">ƒê·ªïi User</button>
        </div>

    </div>

    <script src="script.js"></script>
</body>
</html>
